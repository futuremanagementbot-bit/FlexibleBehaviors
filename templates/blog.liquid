<!-- Blog Page Template -->
<section class="section section--cream">
  <div class="container">
    <div class="section-header fade-in-up">
      <h1>{{ blog.title | default: 'Resources & Insights' }}</h1>
      <p>Practical tips, free resources, and stories from our community.</p>
    </div>

    {%- if blog.articles.size > 0 -%}
      <div class="grid grid--3" style="margin-bottom: var(--space-lg);">
        {%- for article in blog.articles -%}
          <article class="product-card fade-in-up" data-delay="{{ forloop.index }}">
            {%- if article.image -%}
              <a href="{{ article.url }}" class="product-card__image-wrap" style="aspect-ratio: 16/9;" aria-label="{{ article.title }}">
                <img
                  src="{{ article.image | image_url: width: 600 }}"
                  alt="{{ article.image.alt | default: article.title | escape }}"
                  width="600"
                  height="338"
                  loading="lazy"
                  style="width: 100%; height: 100%; object-fit: cover;"
                >
              </a>
            {%- endif -%}

            <div class="product-card__body">
              <time class="text-caption" datetime="{{ article.published_at | date: '%Y-%m-%d' }}">
                {{ article.published_at | date: '%B %d, %Y' }}
              </time>
              <h3 class="product-card__title" style="margin-top: 0.25rem;">
                <a href="{{ article.url }}">{{ article.title }}</a>
              </h3>
              <p class="text-small" style="flex: 1;">{{ article.excerpt_or_content | strip_html | truncatewords: 20 }}</p>
              <a href="{{ article.url }}" class="btn btn-secondary btn-sm" style="align-self: flex-start;">
                Read More
              </a>
            </div>
          </article>
        {%- endfor -%}
      </div>
    {%- else -%}
      <div class="text-center" style="padding: var(--space-xl) 0;">
        <p>Blog posts coming soon! In the meantime, explore our tools.</p>
        <a href="/collections" class="btn btn-primary mt-md">Browse Products</a>
      </div>
    {%- endif -%}

    {%- if blog.articles.size > 0 -%}
      {% comment %} Pagination {% endcomment %}
      {%- paginate blog.articles by 9 -%}
        {%- if paginate.pages > 1 -%}
          <nav class="pagination" aria-label="Blog pagination" style="display: flex; justify-content: center; gap: var(--space-xs); flex-wrap: wrap;">
            {%- if paginate.previous -%}
              <a href="{{ paginate.previous.url }}" class="btn btn-secondary btn-sm">Previous</a>
            {%- endif -%}
            {%- for part in paginate.parts -%}
              {%- if part.is_link -%}
                <a href="{{ part.url }}" class="btn btn-secondary btn-sm">{{ part.title }}</a>
              {%- else -%}
                <span class="btn btn-primary btn-sm" aria-current="page">{{ part.title }}</span>
              {%- endif -%}
            {%- endfor -%}
            {%- if paginate.next -%}
              <a href="{{ paginate.next.url }}" class="btn btn-secondary btn-sm">Next</a>
            {%- endif -%}
          </nav>
        {%- endif -%}
      {%- endpaginate -%}
    {%- endif -%}
  </div>
</section>
